 
 
 private func setTimer() {
        if isTimerRunningNowOnMain == false {
            
            if let index = startingDate {
                
                let difference = Calendar.current.dateComponents([.hour, .minute, .second], from: .now, to: index)
                if difference.hour != nil && difference.minute != nil && difference.second != nil {
                    let beforeStartInterval = (difference.hour! * 3600) + (difference.minute! * 60) + difference.second!
                    if beforeStartInterval > 0 {
                            beforeStartDateTimer.startTimer(view: timerRectangle,
                                                            fastStatusView: fastingStatusView,
                                                            fastTimeView: fastingTimeView,
                                                            interval: TimeInterval(beforeStartInterval))
                            isTimerRunningNowOnMain = true
                            isFastingTimeNow = false
                            wasGoalStreakReached = false
                    } else if beforeStartInterval <= 0 {
                        if let index = lastFastingHour {
                            let diff = Calendar.current.dateComponents([.hour, .minute, .second], from: .now, to: index)
                            if diff.hour != nil && diff.minute != nil && diff.second != nil {
                                let toLastFastHourInterval = (diff.hour! * 3600) + (diff.minute! * 60) + diff.second!
                                if toLastFastHourInterval > 0 {
                                    fastHoursPassed = Int((stableToLastFastInterval - Double(toLastFastHourInterval)) / 3600)
                                        isIntervalFirst = false
                                        fastingTimer.startFeastingTimer(view: timerRectangle,
                                                                        fastStatusView: fastingStatusView,
                                                                        fastTimeView: fastingTimeView,
                                                                        interval: TimeInterval(toLastFastHourInterval),
                                                                        textForInfo: "Fasting Period",
                                                                        strokeColor: Colors().violetLight.cgColor)
                                        isTimerRunningNowOnMain = true
                                        isFastingTimeNow = true
                                        wasGoalStreakReached = false
                                } else if beforeStartInterval <= 0 && toLastFastHourInterval <= 0 {
                                    if let index = firstFastingHour {
                                        let diff = Calendar.current.dateComponents([.hour, .minute, .second], from: .now, to: index)
                                        if diff.hour != nil && diff.minute != nil && diff.second != nil {
                                            let toFirstFastHourInterval = (diff.hour! * 3600) + (diff.minute! * 60) + diff.second!
                                            if toFirstFastHourInterval > 0 {
                                                    isIntervalFirst = true
                                                    fastingTimer.startFeastingTimer(view: timerRectangle,
                                                                                    fastStatusView: fastingStatusView,
                                                                                    fastTimeView: fastingTimeView,
                                                                                    interval: TimeInterval(toFirstFastHourInterval),
                                                                                    textForInfo: "Eating Period",
                                                                                    strokeColor: Colors().violetDark.cgColor)
                                                    isTimerRunningNowOnMain = true
                                                    fastHoursPassed = 0
                                                    isFastingTimeNow = false
                                                    wasGoalStreakReached = false
                                            } else if beforeStartInterval <= 0 && toLastFastHourInterval <= 0 && toFirstFastHourInterval <= 0 {
                                                print("all intervals are <= 0")
                                                needToSetTimer = true
                                                fastHoursPassed = 0
                                                addDay()
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } else {
                fastingTimer.noTimer(view: timerRectangle, hView: fastingStatusView, pView: fastingTimeView)
                isFastingTimeNow = false
            }
        } else {return}
    }
    
    private func addDay() {
        var oneDay = DateComponents()
        oneDay.day = 1
        
        if let firstHour = firstFastingHour, let lastHour = lastFastingHour {
            
            let newFirstDate = Calendar.current.date(byAdding: oneDay, to: firstHour)
            let newLastDate = Calendar.current.date(byAdding: oneDay, to: lastHour)
            
            firstFastingHour = newFirstDate
            lastFastingHour = newLastDate
            currentFastStreak += 1
            levelingLogic.addLevelPoints(points: 0.464, progressView: levelProgressView)
            
            checkIfNeedToSetTimer()
        }
    }
